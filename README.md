# PW_03_2025_data_consolidation_processing_Python
**Студент:** *Нургалеева Гузель*

## Рассчет освоенного бюджета для каждого партнера - Задание 16

Практическая работа по консолидации и аналитической обработке данных по освоению бюджета партнерскими компаниями с использованием Docker Compose, Jupyter Notebook и PostgreSQL на Ubuntu 20+.

### Цель работы

рассчитать освоенный бюджет для каждого партнера на основе консолидации данных из трех источников:
- **partners (CSV):** Партнеры (partner_id, name)
- **projects (Excel):** Проекты (partner_id, project_id, budget)
- **projects_completion_percent (JSON):** Выполнение: (project_id, completion_percent)

### Архитектура

- **Docker Compose v2** для оркестрации контейнеров
- **Jupyter Lab** для анализа данных и визуализации
- **PostgreSQL 15** для хранения и обработки данных
- **Python** с библиотеками: pandas, numpy, matplotlib, seaborn, plotly

### Требования

- Ubuntu 20+ 
- Docker и Docker Compose v2 (см. [dockerhelp.md](dockerhelp.md) для установки)
- Python 3.8+
- Свободные порты: 8888 (Jupyter), 5432 (PostgreSQL)

### Структура проекта

```
programmETL/
├── docker-compose.yml         # Конфигурация Docker Compose
├── Dockerfile                 # Образ Jupyter с библиотеками
├── data_generator.py          # Генератор тестовых данных
├── README.md                  # Документация
├── sql/
│   └── 01_init_schema.sql     # SQL схема для PostgreSQL
├── notebooks/
│   └── budget_execution_analysis.ipynb # Основной анализ
└── data/
    ├── partners.csv                         # Данные компаний-партнеров
    ├── projects.xlsx                        # Данные по проектам
    └── projects_completion_percent.json     # Данные по % освоения бюджета на проекты
```

###  Этапы анализа

1. **Загрузка данных** из CSV, Excel и JSON файлов
2. **Предварительная обработка** и аудит данных
3. **Очистка данных** и приведение к единому формату
4. **Консолидация данных** через JOIN операции
5. **Feature Engineering** - создание производных признаков
6. **Расчет суммы освоенного бюджета** для каждой авиакомпании
7. **Визуализация результатов** с помощью matplotlib, seaborn, plotly
8. **Формирование выводов** и рекомендаций

### Визуализации

- Столбчатая диаграмма уровней освоения бюджета компаниями
- Круговая диаграмма долей бюджета компаний и долей количества проектов на компанию
- Диаграмма рассеяния зависимости размера бюджета компаний и % его освоения, зависимости количесвта проектов и уровня освоения бюджета
- Диаграмма разброса значений освоения бюджета между проектами компании
- Интерактивные графики с Plotly


# База данных PostgreSQL

Автоматически создается схема с таблицами:
- `partners` - партнеры
- `projects` - проекты
- `completion` - процент совоения бюджета
- `budget_execution` - представление для освоенного бюджета

### Результаты

Все результаты сохраняются в папке `data/`:
- `consolidated_partners_budget_execution.csv` - консолидированные данные
- `partners_bidget_execution_summary.csv` - итоговая выручка по авиакомпаниям
  
Скриншоты выполнения запуска Docker Compose и выполнения анализа в Jupyter Notebook расположены в папке process screenshots.
Проект верхнеуровневой архитектуры аналитического решения задания в draw.io расположен в папке Architecture

### Основные выводы

После выполнения анализа были получены:

 - рейтинг партнеров по освоению бюджета
 - общая сумма выделенного бюджета
 - общее количество проектов, находящися в работе
 - ТОП-3 партнера по освоению бюджета
 - Сколько всего освоено бюджета, руб.
 - Общий % освоения бюджета
 - Доля проектов, завершенных более, чем на 2/3

## Вывод.

В результате выполнения данной практической работы были получены навыки консолидации данных из различных источников (CSV, Excel, JSON), их очистки, обогащения и проведения
комплексного аналитического исследования для решения прикладных бизнес-задач с использованием библиотек pandas, numpy, matplotlib, seaborn. 


